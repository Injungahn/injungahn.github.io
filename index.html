<!DOCTYPE html>
<html>
	<head>
		<title> Youtube subtitle generator </title>
        <link rel="stylesheet" href="static/style.css">
				<link href="https://fonts.googleapis.com/css?family=Roboto:400,700" rel="stylesheet">
	</head>

	<body>

		<script>
			function hideInput() {
				var url = new String(document.getElementById("link").value);
				var urlfh = url.slice(0,23);
				var urllh = url.slice(32)
				url = urlfh + "/embed/"+ urllh;

				console.log(urlfh);
				console.log(urllh);
				console.log(url);

				document.getElementById("vid").setAttribute("src", url);

				document.getElementById("input").style.display = "none";
				document.getElementById("output").style.display = "block";
			}

			function revealInput(){
				document.getElementById("input").style.display = "inline-block";
				document.getElementById("output").style.display = "none";
			}

			function loadDoc(){
				var xhr = new XMLHttpRequest();
				xhr.open('GET', "https://ipinfo.io/json", true);
				xhr.send();

				xhr.addEventListener("readystatechange", processRequest, false);

				function processRequest(e) {
					if (xhr.readyState == 4 && xhr.status == 200) {
							var response = JSON.parse(xhr.responseText);
							alert(response.ip);
					}
				}
			}
		</script>

		<h1 class="heading">Youtube subtitle generator</h1>

		<div id = "input">
			<p class="text">Youtube Video:</p>

				<input type="url" name="youtube" id="link" placeholder="insert youtube link:">

				<br> <br>
				<select>
					<option value="Select..." selected="">Select</option>
			        <option value="Arabic">Arabic</option>
			        <option value="Chinese">Chinese</option>
			        <option value="Dutch">Dutch</option>
			        <option value="English">English</option>
			        <option value="Filipino">Filipino</option>
			        <option value="French">French</option>
			        <option value="German">German</option>
			    </select>
			    <br>
				<button type = "button" onclick ="hideInput()">Go!</button>
				<button type="button" onclick="loadDoc()">Request data</button>
			<p id="demo"></p>
		</div> <!-- input -->

		<div id = "output">		
			<iframe width="560" id="vid" height="315" src="https://www.youtube.com/embed/9vcYBmeBliI" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe>

			<textarea rows="20" cols="50" id="sub">Where the subtitles will go.
			</textarea>


			<button type = "button" id="newvid" onclick ="revealInput()">Translate Another Video</button>

		</div>

	</body>

</html>
